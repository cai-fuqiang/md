### megaraid_sas reset问题

<details>
<summary>具体堆栈展开</summary>

```
[26771.118974] ---[ end trace 0000000000000000 ]---
[31419.583501] INFO: task jbd2/dm-0-8:1682 blocked for more than 120 seconds.
[31419.583916]       Tainted: G        W IOE       6.6.0-117.0.0.122.loongarch64 #1
[31419.584267] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[31419.584610] task:jbd2/dm-0-8     state:D stack:0     pid:1682  ppid:2      flags:0x00000800
[31419.584959] Stack : 9000001a96575880 9000001a9a76ab70 9000301a16237878 0000000000000000
[31419.585308]         90000000017343f8 0000000000000000 0000000000000002 e55752379325ff98
[31419.585657]         0000000000000001 9000301a8442bb50 fffffffffffffffb fffffffffffdffff
[31419.586005]         0000000000000000 90000000015d39e8 9000001a969b7bc0 9000000002329538
[31419.586351]         0000000000000002 9000001a9a76a440 9000001a969b7cc0 90000000015d2d58
[31419.586690]         0000000000000000 90000000015d3118 0000000000000002 90000000015d3a04
[31419.587023]         9000001a969b7ba8 90000000015d3544 0000000000000000 0000000000000000
[31419.587360]         9000001a92a49800 9000001a92a49848 9000001ab79dbcf0 9000301a7b4c7700
[31419.587706]         9000000002391000 90000000015d362c 0000000013605db6 9000001ab79dbcf0
[31419.588044]         0000000000000002 0000000000000000 0000000000000000 9000001a9a76a440
[31419.588382]         ...
[31419.588714] Call Trace:
[31419.588717] [<90000000015d27d4>] __schedule+0x47c/0x9a8
[31419.589381] [<90000000015d2d54>] schedule+0x54/0x138
[31419.589707] [<90000000015d3114>] io_schedule+0x44/0x68
[31419.590022] [<90000000015d3a00>] bit_wait_io+0x18/0x80
[31419.590325] [<90000000015d3540>] __wait_on_bit+0xd8/0x110
[31419.590619] [<90000000015d3628>] out_of_line_wait_on_bit+0xb0/0xd8
[31419.590908] [<9000000000773b4c>] jbd2_journal_commit_transaction+0x1424/0x18b8
[31419.591200] [<900000000077d6f4>] kjournald2+0x11c/0x3c0
[31419.591499] [<90000000002800f0>] kthread+0xf8/0x108
[31419.591788] [<9000000000222044>] ret_from_kernel_thread+0x8/0xa4

[31419.592357] INFO: task auditd:4528 blocked for more than 120 seconds.
[31419.592648]       Tainted: G        W IOE       6.6.0-117.0.0.122.loongarch64 #1
[31419.592941] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[31419.593237] task:auditd          state:D stack:0     pid:4528  ppid:1      flags:0x00000800
[31419.593542] Stack : 0000000000000000 9000301a1ca49930 0000000000000003 0000000000000000
[31419.593847]         9000000001732600 0000000000000000 0000000000000002 e55752379325ff98
[31419.594157]         0000000000000001 9000001a8e057db0 9000000002391000 9000001a92a498c0
[31419.594469]         9000001a92a498a8 fffffffffffffe00 0000000000000200 00000000000505d4
[31419.594784]         9000001a92a49800 9000301a1ca49200 00007ffff1b0a900 90000000015d2d58
[31419.595100]         9000001a92a49848 900000000077c924 0000000000000000 9000301a1ca49200
[31419.595423]         90000000002c63e8 9000001a92a498b0 9000301a3b9c3dc8 e55752379325ff98
[31419.595744]         00007ffff1308000 00007ffff24bbcd8 00007ffff1b0b040 0000000000000000
[31419.596069]         7fffffffffffffff 0000000000000000 9000301a149869a8 9000001a92a49800
[31419.596394]         9000001a9503bf00 90000000006e0cb8 0000000000000000 00000000000505d4
[31419.596720]         ...
[31419.597041] Call Trace:
[31419.597042] [<90000000015d27d4>] __schedule+0x47c/0x9a8
[31419.597680] [<90000000015d2d54>] schedule+0x54/0x138
[31419.598002] [<900000000077c920>] jbd2_log_wait_commit+0xf8/0x1c0
[31419.598325] [<90000000006e0cb4>] ext4_sync_file+0xd4/0x420
[31419.598649] [<9000000000631550>] sys_fsync+0x48/0xa0
[31419.598967] [<90000000015cd028>] do_syscall+0x88/0xd0
[31419.599279] [<9000000000221f18>] handle_syscall+0xb8/0x158

[31419.600035] INFO: task xcgroup:74835 blocked for more than 120 seconds.
[31419.600339]       Tainted: G        W IOE       6.6.0-117.0.0.122.loongarch64 #1
[31419.600643] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[31419.600948] task:xcgroup         state:D stack:0     pid:74835 ppid:1      flags:0x00020800
[31419.601259] Stack : 0000000000000000 9000301a11be5030 0000000000000000 0000000000000000
[31419.601577]         9000000001731c00 0000000000000000 0000000000000002 e55752379325ff98
[31419.601897]         0000000000000000 9000301a1c8a7db0 9000000002391000 9000001a92a498c0
[31419.602218]         9000001a92a498a8 fffffffffffffe00 0000000000000200 00000000000505d5
[31419.602540]         9000001a92a49800 9000301a11be4900 000000c0000036c0 90000000015d2d58
[31419.602862]         9000001a92a49848 900000000077c924 0000000000000000 9000301a11be4900
[31419.603184]         90000000002c63e8 9000001afca83dc8 9000001a92a498b0 e55752379325ff98
[31419.603510]         00000000000000c8 000000c00003ef08 000000c000196e78 0000000000000000
[31419.603836]         7fffffffffffffff 0000000000000000 90003000861f1da8 9000001a92a49800
[31419.604164]         9000301a11b13f00 90000000006e0cb8 0000000000000052 00000000000505d5
[31419.604494]         ...
[31419.604820] Call Trace:
[31419.604821] [<90000000015d27d4>] __schedule+0x47c/0x9a8
[31419.605474] [<90000000015d2d54>] schedule+0x54/0x138
[31419.605803] [<900000000077c920>] jbd2_log_wait_commit+0xf8/0x1c0
[31419.606132] [<90000000006e0cb4>] ext4_sync_file+0xd4/0x420
[31419.606458] [<9000000000631550>] sys_fsync+0x48/0xa0
[31419.606784] [<90000000015cd028>] do_syscall+0x88/0xd0
[31419.607109] [<9000000000221f18>] handle_syscall+0xb8/0x158

[31419.607815] INFO: task worker:131279 blocked for more than 120 seconds.
[31419.608136]       Tainted: G        W IOE       6.6.0-117.0.0.122.loongarch64 #1
[31419.608458] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[31419.608779] task:worker          state:D stack:0     pid:131279 ppid:1      flags:0x00060802
[31419.609102] Stack : 0000000000000000 9000001a94db2b30 0000000000000000 0000000000000000
[31419.609429]         9000000001730800 0000000000000000 0000000000000002 e55752379325ff98
[31419.609756]         0000000000000000 9000001afca83db0 9000000002391000 9000001a92a498c0
[31419.610082]         9000001a92a498a8 fffffffffffffe00 0000000000000200 00000000000505d5
[31419.610411]         9000001a92a49800 9000001a94db2400 00007ffec7cf21f0 90000000015d2d58
[31419.610739]         9000001a92a49848 900000000077c924 0000000000000000 9000001a94db2400
[31419.611065]         90000000002c63e8 9000301a2170fdc8 9000301a1c8a7dc8 e55752379325ff98
[31419.611395]         000055555824ecb8 00007ffff3b67cd8 0000555597759f00 0000000000000000
[31419.611723]         7fffffffffffffff 0000000000000001 9000301a8e985b68 9000001a92a49800
[31419.612048]         9000001a9d2d0100 90000000006e0cb8 0000000000000053 00000000000505d5
[31419.612373]         ...
[31419.612696] Call Trace:
[31419.612697] [<90000000015d27d4>] __schedule+0x47c/0x9a8
[31419.613337] [<90000000015d2d54>] schedule+0x54/0x138
[31419.613661] [<900000000077c920>] jbd2_log_wait_commit+0xf8/0x1c0
[31419.613984] [<90000000006e0cb4>] ext4_sync_file+0xd4/0x420
[31419.614308] [<9000000000631600>] sys_fdatasync+0x58/0xe8
[31419.614632] [<90000000015cd028>] do_syscall+0x88/0xd0
[31419.614955] [<9000000000221f18>] handle_syscall+0xb8/0x158

[31419.615596] INFO: task qemu-img:131237 blocked for more than 120 seconds.
[31419.615916]       Tainted: G        W IOE       6.6.0-117.0.0.122.loongarch64 #1
[31419.616236] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[31419.616557] task:qemu-img        state:D stack:0     pid:131237 ppid:8130   flags:0x00060802
[31419.616879] Stack : ffffff301acda880 9000001a8c3474b0 0000000000000000 0000000000000000
[31419.617204]         90000000017333f8 0000000000000000 0000000000000002 e55752379325ff98
[31419.617531]         0000000000000000 9000301a3b9c3db0 9000000002391000 9000001a92a498c0
[31419.617857]         9000001a92a498a8 fffffffffffffe00 0000000000000200 00000000000505d5
[31419.618185]         9000001a92a49800 9000001a8c346d80 00007ffff1f3a560 90000000015d2d58
[31419.618513]         9000001a92a49848 900000000077c924 0000000000000000 9000001a8c346d80
[31419.618839]         90000000002c63e8 9000001a8e057dc8 9000301a2170fdc8 e55752379325ff98
[31419.619166]         000055555939c018 00007ffff368bcd8 0000555564f27450 0000000000000000
[31419.619498]         7fffffffffffffff 0000000000000001 9000301a148a8628 9000001a92a49800
[31419.619827]         9000301a115d8200 90000000006e0cb8 0000000000000053 00000000000505d5
[31419.620153]         ...
[31419.620476] Call Trace:
[31419.620477] [<90000000015d27d4>] __schedule+0x47c/0x9a8
[31419.621123] [<90000000015d2d54>] schedule+0x54/0x138
[31419.621448] [<900000000077c920>] jbd2_log_wait_commit+0xf8/0x1c0
[31419.621775] [<90000000006e0cb4>] ext4_sync_file+0xd4/0x420
[31419.622101] [<9000000000631600>] sys_fdatasync+0x58/0xe8
[31419.622428] [<90000000015cd028>] do_syscall+0x88/0xd0
[31419.622753] [<9000000000221f18>] handle_syscall+0xb8/0x158

[31419.623400] INFO: task qemu-img:131266 blocked for more than 120 seconds.
[31419.623723]       Tainted: G        W IOE       6.6.0-117.0.0.122.loongarch64 #1
[31419.624046] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[31419.624369] task:qemu-img        state:D stack:0     pid:131266 ppid:7780   flags:0x00060802
[31419.624694] Stack : ffffff301a256000 9000300848f6cff0 0000000000000000 0000000000000000
[31419.625023]         90000000017339f8 0000000000000000 0000000000000002 e55752379325ff98
[31419.625353]         0000000000000000 9000301a2170fdb0 9000000002391000 9000001a92a498c0
[31419.625682]         9000001a92a498a8 fffffffffffffe00 0000000000000200 00000000000505d5
[31419.626013]         9000001a92a49800 9000300848f6c8c0 00007ffff170e560 90000000015d2d58
[31419.626345]         9000001a92a49848 900000000077c924 0000000000000000 9000300848f6c8c0
[31419.626675]         90000000002c63e8 9000301a3b9c3dc8 9000001afca83dc8 e55752379325ff98
[31419.627004]         0000555558968018 00007ffff2e5fcd8 000055557eba7450 0000000000000000
[31419.627333]         7fffffffffffffff 0000000000000001 9000000103ed9de8 9000001a92a49800
[31419.627667]         9000301a10a2b200 90000000006e0cb8 0000000000000053 00000000000505d5
[31419.627996]         ...
[31419.628321] Call Trace:
[31419.628322] [<90000000015d27d4>] __schedule+0x47c/0x9a8
[31419.628969] [<90000000015d2d54>] schedule+0x54/0x138
[31419.629296] [<900000000077c920>] jbd2_log_wait_commit+0xf8/0x1c0
[31419.629624] [<90000000006e0cb4>] ext4_sync_file+0xd4/0x420
[31419.629951] [<9000000000631600>] sys_fdatasync+0x58/0xe8
[31419.630279] [<90000000015cd028>] do_syscall+0x88/0xd0
[31419.630606] [<9000000000221f18>] handle_syscall+0xb8/0x158

[31448.541535] sd 4:0:32:0: [sdf] tag#132 Abort request is for SMID: 133
[31448.542154] sd 4:0:32:0: attempting task abort! scmd(0x000000006ce53541) tm_dev_handle 0x12
[31449.038230] megaraid_sas 0000:0d:00.0: megasas_disable_intr_fusion is called outbound_intr_mask:0x40000009
[31449.038906] megaraid_sas 0000:0d:00.0: megasas_enable_intr_fusion is called outbound_intr_mask:0x40000000
[31449.039260] sd 4:0:32:0: [sdf] tag#132 task abort FAILED!! scmd(0x000000006ce53541)
[31449.039619] sd 4:0:32:0: [sdf] tag#132 CDB: Write(16) 8a 08 00 00 00 01 ba a9 38 48 00 00 00 08 00 00
[31449.161590] sd 4:0:32:0: attempting target reset! scmd(0x000000006ce53541) tm_dev_handle: 0x12
[31449.538098] megaraid_sas 0000:0d:00.0: megasas_disable_intr_fusion is called outbound_intr_mask:0x40000009
[31449.538505] megaraid_sas 0000:0d:00.0: SCSI commands pending to targetchannel 0 id 32        SMID: 0x85
[31449.538863] sd 4:0:32:0: [sdf] tag#132 CDB: Write(16) 8a 08 00 00 00 01 ba a9 38 48 00 00 00 08 00 00
[31449.539223] megaraid_sas 0000:0d:00.0: megasas_enable_intr_fusion is called outbound_intr_mask:0x40000000
[31449.539589] sd 4:0:32:0: [sdf] tag#132 target reset FAILED!!
[31449.539950] sd 4:0:32:0: [sdf] tag#132 OCR is requested due to IO timeout!!
[31449.540306] sd 4:0:32:0: [sdf] tag#132 SCSI host state: 5  SCSI host busy: 1  FW outstanding: 1
[31449.540662] sd 4:0:32:0: [sdf] tag#132 scmd: (0x000000006ce53541)  retries: 0x0  allowed: 0x5
[31449.541022] sd 4:0:32:0: [sdf] tag#132 CDB: Write(16) 8a 08 00 00 00 01 ba a9 38 48 00 00 00 08 00 00
[31449.541385] sd 4:0:32:0: [sdf] tag#132 Request descriptor details:
[31449.541765] sd 4:0:32:0: [sdf] tag#132 RequestFlags:0xc  MSIxIndex:0x44  SMID:0x85  LMID:0x0  DevHandle:0x12
[31449.542137] IO request frame:
[31449.542505] 00000000: 00000012 00000000 00000000 91f03180 00600002 00000020 00000000 00001000
[31449.542895] 00000020: 00000000 00004010 00000000 00000000 00000000 00000000 00000000 01000000
[31449.543281] 00000040: 0000088a a9ba0100 00004838 00000800 00000000 00000000 00000000 00000000
[31449.543669] 00000060: 005b0012 011f0088 00000000 00000000 00000000 00000000 00010110 00000000
[31449.544055] 00000080: e2e41000 0000001a 00001000 40000000 00000000 00000000 00000000 00000000
[31449.544436] 000000a0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.544812] 000000c0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.545180] 000000e0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.545540] Chain frame:
[31449.545899] 00000000: f4fa4000 00000018 00004000 00000000 f5754000 00000018 00001000 40000000
[31449.546264] 00000020: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.546626] 00000040: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.546982] 00000060: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.547333] 00000080: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.547680] 000000a0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.548021] 000000c0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.548355] 000000e0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.548683] 00000100: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.549006] 00000120: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.549322] 00000140: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.549647] 00000160: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.549963] 00000180: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.550273] 000001a0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.550577] 000001c0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.550877] 000001e0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.551174] 00000200: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.551469] 00000220: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.551759] 00000240: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.552046] 00000260: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.552323] 00000280: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.552592] 000002a0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.552850] 000002c0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.553104] 000002e0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.553348] 00000300: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.553595] 00000320: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.553822] 00000340: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.554038] 00000360: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.554248] 00000380: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.554448] 000003a0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.554638] 000003c0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.554818] 000003e0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[31449.555077] megaraid_sas 0000:0d:00.0: megasas_disable_intr_fusion is called outbound_intr_mask:0x40000009
[31449.555595] megaraid_sas 0000:0d:00.0: megasas_enable_intr_fusion is called outbound_intr_mask:0x40000000
[31459.787724] sd 4:0:32:0: Power-on or device reset occurred
```

</details>
