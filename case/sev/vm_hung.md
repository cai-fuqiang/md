## 虚拟机启动后 HUNG住
查看qemu 日志，没有报错，正常启动vcpu, 串口日志中没有任何打印.

查看qemu进程状态:
```
[root@11-244-8-3 19:47:13 ~]# ps -o comm,pid,tid -p 1347712 -T
COMMAND             PID     TID
qemu-system-x86 1347712 1347712
qemu-system-x86 1347712 1347717
IO iothread1    1347712 1347718
IO iothread2    1347712 1347719
IO mon_iothread 1347712 1347738
CPU 0/KVM       1347712 1347739
CPU 1/KVM       1347712 1347740
CPU 2/KVM       1347712 1347741
CPU 3/KVM       1347712 1347742
CPU 4/KVM       1347712 1347743
CPU 5/KVM       1347712 1347744
CPU 6/KVM       1347712 1347745
CPU 7/KVM       1347712 1347746
vnc_worker      1347712 1347756
```

top 查看进程cpu占用:
```
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
1347739 root      20   0   17.2g  76844  17216 R  99.9   0.0      6,44 CPU 0/KVM
1347712 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:05.12 qemu-system-x86
1347717 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.00 qemu-system-x86
1347718 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.00 IO iothread1
1347719 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.00 IO iothread2
1347738 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:03.63 IO mon_iothread
1347740 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.05 CPU 1/KVM
1347741 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.05 CPU 2/KVM
1347742 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.05 CPU 3/KVM
1347743 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.05 CPU 4/KVM
1347744 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.05 CPU 5/KVM
1347745 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.06 CPU 6/KVM
1347746 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.05 CPU 7/KVM
1347756 root      20   0   17.2g  76844  17216 S   0.0   0.0   0:00.00 vnc_worker
```
可以查看cpu 0 占用100%

```
19:49:57.094070

Analyze events for pid(s) 1347712, all VCPUs:

                                 VM-EXIT    Samples  Samples%     Time%    Min Time    Max Time         Avg time

                               interrupt        152    97.44%    99.01%      1.92us     15.51us      4.18us ( +-   2.85% )
                                   pause          4     2.56%     0.99%      1.24us      2.38us      1.58us ( +-  17.09% )

Total Samples:156, Total events handled time:641.83us.
```
可以发现，大部分事件为interrupt，少量事件为`pause`

**结合上述信息可知，guest cpu0 在跑，并且不触发特权指令, 并且会执行pause指令**

获取guest寄存器信息:
```
[root@11-244-8-3 19:51:42 wfq]# virsh qemu-monitor-command  i-t1t4evona3 --hmp 'info registers'
EAX=fee00900 EBX=00000000 ECX=0000001b EDX=00000000
ESI=00000000 EDI=00000000 EBP=00000000 ESP=00000000
EIP=00000000 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
ES =0000 00000000 00000000 00000000
CS =0000 00000000 00000000 00000000
SS =0000 00000000 00000000 00000000
DS =0000 00000000 00000000 00000000
FS =0000 00000000 00000000 00000000
GS =0000 00000000 00000000 00000000
LDT=0000 00000000 00000000 00000000
TR =0000 00000000 00000000 00000000
GDT=     0000000000000000 00000000
IDT=     0000000000000000 00000000
CR0=80010033 CR2=0000000000000000 CR3=0000000000000000 CR4=00000668
DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000
DR6=00000000ffff0ff0 DR7=0000000000000400
EFER=0000000000000d00
FCW=0000 FSW=0000 [ST=0] FTW=00 MXCSR=00000000
FPR0=0000000000000000 0000 FPR1=0000000000000000 0000
FPR2=0000000000000000 0000 FPR3=0000000000000000 0000
FPR4=0000000000000000 0000 FPR5=0000000000000000 0000
FPR6=0000000000000000 0000 FPR7=0000000000000000 0000
XMM00=0000000000000000 0000000000000000 XMM01=0000000000000000 0000000000000000
XMM02=0000000000000000 0000000000000000 XMM03=0000000000000000 0000000000000000
XMM04=0000000000000000 0000000000000000 XMM05=0000000000000000 0000000000000000
XMM06=0000000000000000 0000000000000000 XMM07=0000000000000000 0000000000000000
```
可以看到是未初始化的状态，该虚拟机为SEV-ES 加密类型，获取不到寄存器信息。
